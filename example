<select id="region">
    <option value="">Select a country</option>
    <option value="country1">Country 1</option>
    <option value="country2">Country 2</option>
    <!-- Add more country options here -->
</select>

<select id="regionalDropdown" multiple>
    <option value="">Select a region</option>
</select>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    // Function to handle the dynamic behavior of the second dropdown
    function updateRegionalDropdown(selectedCountries) {
        $.ajax({
            url: "{% url 'get_regional_code' %}",
            data: { 'countries': selectedCountries },
            dataType: 'json',
            success: function(data) {
                // Clear the second dropdown options
                $("#regionalDropdown").empty();
                // Add the new options based on the received data
                $.each(data.regional_code, function(index, value) {
                    $("#regionalDropdown").append('<option value="' + value + '">' + value + '</option>');
                });
            },
            error: function(error) {
                console.log("Error:", error);
            }
        });
    }

    $(document).ready(function() {
        // Function to handle the change in the first dropdown
        $("#region").change(function() {
            var selectedCountries = $(this).val();
            updateRegionalDropdown(selectedCountries);
        });
    });
</script>


v2:

 function updateRegionalDropdown(selectedCountries) {
            var xhr = new XMLHttpRequest();
            var url = `/get_regional_code/?countries=${selectedCountries.join(',')}`;
            xhr.open("GET", url, true);
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE) {
                    if (xhr.status === 200) {
                        console.log("Received Data:", xhr.responseText);
                        
                        var data = JSON.parse(xhr.responseText);
                        var regionalDropdown = document.getElementById("regionalDropdown");
                        regionalDropdown.innerHTML = ""; // Clear existing options
                        data.regional_code.forEach(function(value) {
                            console.log("Adding option:", value);
                            var option = document.createElement("option");
                            option.value = value;
                            option.textContent = value;
                            regionalDropdown.appendChild(option);
                        });
                    } else {
                        console.error("Request failed with status:", xhr.status);
                    }
                }
            };
            xhr.send();
        }

        document.addEventListener("DOMContentLoaded", function() {
            var regionDropdown = document.getElementById("region");
            regionDropdown.addEventListener("change", function() {
                var selectedCountries = Array.from(this.selectedOptions, function(option) {
                    return option.value;
                });
                updateRegionalDropdown(selectedCountries);
            });
        });
