<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Expandable Table</title>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0/css/bootstrap.min.css" rel="stylesheet">
  <style>
    /* Remove border lines from all tables */
    .table,
    .table td,
    .table th {
      border: none;
    }

    /* Reduce space between td elements and add padding-bottom */
    .table td,
    .table th {
      padding-bottom: 1px;
      white-space: nowrap; /* Prevent text wrap */
      position: relative; /* Enable positioning for hover text */
    }

    .table td:hover::after,
    .table th:hover::after {
      content: attr(data-hover-text);
      position: absolute;
      left: 0;
      top: 100%;
      background: #fff;
      border: 1px solid #ccc;
      padding: 5px;
      white-space: nowrap;
      z-index: 1000;
      display: block;
    }

    .extra-column {
      display: none;
    }

    .accordion-header button {
      transition: transform 0.3s ease-in-out;
      display: block;
      margin: 0 auto; /* Center align the button within the th */
    }

    .accordion-header button.collapsed {
      transform: rotate(180deg);
    }
  </style>
</head>
<body>

<div class="accordion accordion-flush" id="accordionFlushExample">
  <table class="table">
    <!-- Table Headers -->
    <thead>
      <tr>
        <th>Column 1</th>
        <th>Column 2</th>
        <th>Column 3</th>
        <th>
          Column 4
          <button class="btn btn-primary" type="button" onclick="toggleExtraColumns()">
            +
          </button>
        </th>
        <th>Column 5</th>
      </tr>
    </thead>
    <tbody>
      <!-- Dynamic Data Rows -->
      {% for row in table_data %}
      <tr>
        <td>{{ row.col1 }}</td>
        <td>{{ row.col2 }}</td>
        <td>{{ row.col3 }}</td>
        <td class="extra-column" colspan="5">
          <td>{{ row.extra1 }}</td>
          <td>{{ row.extra2 }}</td>
          <td>{{ row.extra3 }}</td>
          <td>{{ row.extra4 }}</td>
          <td>{{ row.extra5 }}</td>
        </td>
        <td>{{ row.col4 }}</td>
        <td>{{ row.col5 }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<script>
  function toggleExtraColumns() {
    var extraColumnsRow = document.querySelector('.extra-column');
    var button = document.querySelector('.accordion-header button');

    if (button.textContent === '+') {
      button.textContent = '-';
      extraColumnsRow.style.display = 'table-row';
    } else {
      button.textContent = '+';
      extraColumnsRow.style.display = 'none';
    }
  }
</script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0/js/bootstrap.bundle.min.js"></script>
</body>
</html>